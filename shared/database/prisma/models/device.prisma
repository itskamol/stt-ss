model Action {
    id           Int         @id @default(autoincrement())
    deviceId     Int?        @map("device_id")
    gateId       Int?        @map("gate_id")
    actionTime   DateTime    @map("action_time")
    employeeId   Int?        @map("employee_id")
    visitorId    Int?        @map("visitor_id")
    visitorType  VisitorType
    entryType    EntryType
    actionType   ActionType
    actionResult String?     @map("action_result")
    actionMode   ActionMode

    device   Device?   @relation(fields: [deviceId], references: [id])
    gate     Gate?     @relation(fields: [gateId], references: [id])
    employee Employee? @relation(fields: [employeeId], references: [id])
    visitor  Visitor?  @relation(fields: [visitorId], references: [id])

    @@map("actions")
}

model Gate {
    id        Int      @id @default(autoincrement())
    name      String
    createdAt DateTime @default(now()) @map("created_at")

    devices Device[]
    actions Action[]

    @@map("gates")
}

model Device {
    id               Int           @id @default(autoincrement())
    gateId           Int?          @map("gate_id")
    name             String?
    entryType        EntryType?    @map("entry_type")
    type             DeviceType?   @map("type")
    manufacturer     String?
    model            String?
    firmware         String?
    serialNumber     String?       @map("serial_number")
    ipAddress        String?       @map("ip_address")
    login            String?
    password         String?
    welcomeText      String?       @map("welcome_text")
    welcomeTextType  WelcomeText?  @map("welcome_text_type")
    welcomePhoto     String?       @map("welcome_photo")
    welcomePhotoType WelcomePhoto? @map("welcome_photo_type")

    // --- Standard Fields ---
    isActive  Boolean  @default(true) @map("is_active")
    createdAt DateTime @default(now()) @map("created_at")
    updatedAt DateTime @updatedAt @map("updated_at")

    gate    Gate?    @relation(fields: [gateId], references: [id])
    actions Action[]

    @@map("devices")
}
